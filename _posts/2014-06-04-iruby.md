---
layout: post
title: "IRuby: IPython naRuby"
assets: /assets/2014-06-iruby
subtitle: Jak jsem se nauÄil nedÄ›lat si starosti a mÃ­t rÃ¡d notebook
date:   2014-06-04 20:00:00
dependencies: |
  <script src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
---

<i>Text vychÃ¡zÃ­ z mÃ© pÅ™ednÃ¡Å¡ky na [kvÄ›tnovÃ©m Ruby srazu](http://pojd.me/3hg) v Praze.</i>

# tl;dr

* Je otrava pÅ™ednÃ¡Å¡et o programovÃ¡nÃ­ s klasickÃ½mi slidy.
* LepÅ¡Ã­ pÅ™Ã­stup [je notebook](#notebook).
* IPython [nenÃ­ jen pro Python](#ipython), ale i [pro Ruby](https://github.com/minad/iruby) -- a [takhle to vypadÃ¡](http://nbviewer.ipython.org/github/minad/iruby/blob/master/IRuby-Example.ipynb).
* Notebooky v praxi [fungujÃ­ dobÅ™e](#exp).
* S notebooky se [dÃ¡ pÅ™ednÃ¡Å¡et](#slidemode).
* Ale [zprovoznit to](#howto) nemusÃ­ bÃ½t sranda...

# ProblÃ©m se slidy

Od loÅˆskÃ©ho roku jsem zaÄal uÄit programovÃ¡nÃ­ v Ruby na [FakultÄ› informaÄnÃ­ch technologiÃ­ ÄŒVUT](https://fit.cvut.cz/), v pÅ™edmÄ›tu [MI-RUB](http://bilakniha.cvut.cz/cs/predmet1477706.html). Jestli mÄ› na pÅ™ednÃ¡Å¡enÃ­ nÄ›co nebavilo, je to pÅ™Ã­prava materiÃ¡lÅ¯. Bez ohledu na mnoÅ¾stvÃ­ obrÃ¡zkÅ¯ a jak moc to â€zaobalÃ­me,â€œ nevyhnutelnÄ› dojde na ukÃ¡zky kÃ³du.

<figure class="full">
![]({{page.assets}}/slide.png)
</figure>

PrezentaÄnÃ­ slidy pak slouÅ¾Ã­ jednak jako vodÃ­tko pro pÅ™ednÃ¡Å¡ejÃ­cÃ­, jednak jako reference pro studenty. Typicky sÃ¡hneme po nÄ›jakÃ©m â€slidewareâ€œ typu PowerPoint, pÅ™Ã­padnÄ› po LaTeXu, kterÃ½ se alespoÅˆ postarÃ¡ o obarvenÃ­ kÃ³du. ProgresivnÄ›jÅ¡Ã­ pÅ™ednÃ¡Å¡ejÃ­cÃ­ si pÅ™ipravÃ­ prezentaci v prohlÃ­Å¾eÄi tÅ™eba s [Reveal.js](http://lab.hakim.se/reveal-js/), jeÅ¡tÄ› lÃ©pe psanou v Markdownu -- napÅ™Ã­klad s [Remark.js](http://remarkjs.com/). JenÅ¾e aÅ¥ obarvÃ­me kÃ³d sebelÃ©pe, neÅ™eÅ¡Ã­ to jeden zÃ¡sadnÃ­ problÃ©m.

PÅ™i uÄenÃ­ se novÃ©ho jazyka (a programovÃ¡nÃ­ vÅ¯bec) mi pÅ™ipadÃ¡ dÅ¯leÅ¾itÃ¡ fÃ¡ze experimentovÃ¡nÃ­, moÅ¾nost spustit existujÃ­cÃ­ kÃ³d, upravit jej, pozorovat zmÄ›nu chovÃ¡nÃ­, rozbÃ­t jej, zjistit proÄ to nefunguje atp. StatickÃ© slidy s ukÃ¡zkami kÃ³du od experimentovÃ¡nÃ­ spÃ­Å¡e odrazujÃ­; pokud si chci ukÃ¡zky sÃ¡m vyzkouÅ¡et nebo pÅ™edvÃ©st jejich variaci, kÃ³d musÃ­m postupnÄ› zkopÃ­rovat do samostatnÃ©ho souboru nebo do interpreta (napÅ™Ã­klad [<abbr title="Interactive Ruby Shell">IRB</abbr>](http://en.wikipedia.org/wiki/Interactive_Ruby_Shell)) -- â€ideÃ¡lnÄ›â€œ je kÃ³d pÅ™es nÄ›kolik slidÅ¯ s vnoÅ™enÃ½mi bloky. V pÅ™Ã­padÄ› MI-RUB udrÅ¾ujeme ÄÃ¡st ukÃ¡zek stranou. To znamenÃ¡ vÃ­ce prÃ¡ce s ÃºdrÅ¾bou pro nÃ¡s a ztrÃ¡tu Äasu s hledÃ¡nÃ­m kÃ³du pro studenty (nemluvÄ› o poruÅ¡enÃ­ <abbr title="Don't Repeat Yourself" lang="en">DRY</abbr>).

# REPL FTW!

Ve snaze najÃ­t lepÅ¡Ã­ pÅ™Ã­stup k pÅ™ednÃ¡Å¡enÃ­ mÄ› napadlo, zda by se Å™eÅ¡enÃ­ nemohlo skrÃ½vat v REPL -- [Read--eval--print--loop](https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop), tedy interaktivnÃ­ shell pro jazyk, jako jiÅ¾ zmÃ­nÄ›nÃ½ IRB pro Ruby. Kouzlo REPL spoÄÃ­vÃ¡ ve velice krÃ¡tkÃ© smyÄce mezi vstupem a zpÄ›tnou vazbou: napÃ­Å¡u Å™Ã¡dku kÃ³du a vidÃ­m vÃ½sledek -- nebo chybu. Je to mnohem pÅ™Ã­stupnÄ›jÅ¡Ã­ neÅ¾ tradiÄnÃ­ prÃ¡ce s textovÃ½m editorem nebo IDE, kde jsou fÃ¡ze *psanÃ­ kÃ³du* a *spouÅ¡tÄ›nÃ­ kÃ³du* striktnÄ› oddÄ›lenÃ©. Velice pÄ›knÄ› toho vyuÅ¾Ã­vÃ¡ strÃ¡nka [TryRuby](http://tryruby.org/), kterÃ¡ spojuje lineÃ¡rnÃ­ vÃ½klad s experimentovÃ¡nÃ­m v REPL pro vÃ½uku jazyka.

NÄ›kterÃ© programovacÃ­ jazyky a prostÅ™edÃ­ pouÅ¾Ã­vajÃ­ REPL jako primÃ¡rnÃ­ zpÅ¯sob interakce. Na SNM jsme tak vytvÃ¡Å™eli [analÃ½zy v jazyce R]({% post_url 2013-11-30-dh2 %}). [RStudio IDE](http://www.rstudio.com/) funguje pÅ™edevÅ¡Ã­m jako velkÃ½ REPL s pokroÄilou historiÃ­ a nÃ¡hledem na data. NaÅ¡e analÃ½zy v R vÅ¡ak vÄ›tÅ¡inou byly jednoduchÃ© dÃ¡vkovÃ© skripty pro kterÃ© je tento zpÅ¯sob prÃ¡ce naprosto ideÃ¡lnÃ­.

Pro ÃºÄely vÃ½uky mÃ¡ vÅ¡ak REPL Å™adu nevÃ½hod. NenÃ­ ÃºplnÄ› jednoduchÃ© se vrÃ¡tit zpÄ›t a zmÄ›nit starÅ¡Ã­ definici; musÃ­m si ji najÃ­t v historii, upravit a znovu spustit. VelkÃ½ problÃ©m je i reprodukovatelnost; schvÃ¡lnÄ›, jak si v IRB uloÅ¾Ã­m do souboru to, co jsem napsal? Å½e jsem mÄ›l pouÅ¾Ã­t [Pry](http://pryrepl.org/)? VÃ½sledkem vÅ¡ak bude stÃ¡le jen neokomentovanÃ½ textovÃ½ soubor s mÃ½mi vstupy, kterÃ½ mÅ¯Å¾u spustit jako celek, nebo Å™Ã¡dku po Å™Ã¡dce. S pÅ™Ã­pravou materiÃ¡lÅ¯ to pÅ™Ã­liÅ¡ nepomÅ¯Å¾e.

PotÅ™ebovali bychom zkombinovat interaktivitu REPL s pÅ™enositelnostÃ­ prezentace nebo textovÃ©ho dokumentu. DobrÃ¡ zprÃ¡va je, Å¾e *Å™eÅ¡enÃ­ existuje* -- a matematici nemusÃ­ ÄÃ­st dÃ¡l.

# Notebook je kamarÃ¡d
{:#notebook}

ZdÃ¡ se, Å¾e vÄ›dci tento problÃ©m vyÅ™eÅ¡ili uÅ¾ pÅ™ed vÃ­ce neÅ¾ dvaceti roky. V aplikacÃ­ch pro symbolickou matematiku a vizualizace, jako je Maple nebo Mathematica, se pracuje s interaktivnÃ­mi dokumenty, tzv. <i>worksheety</i> nebo <i>notebooky</i>.

<figure>
[![Mathematica logistic bifurcation](//upload.wikimedia.org/wikipedia/commons/thumb/3/3e/Mathematica_logistic_bifurcation.png/512px-Mathematica_logistic_bifurcation.png)](http://commons.wikimedia.org/wiki/File%3AMathematica_logistic_bifurcation.png)

<figcaption>
Notebook v aplikaci Wolfram Mathematica ([zdroj](http://commons.wikimedia.org/wiki/File%3AMathematica_logistic_bifurcation.png))
</figcaption>
</figure>

Notebook se sklÃ¡dÃ¡ z jednotlivÃ½ch bunÄ›k (<i>cells</i>); do buÅˆky zapÃ­Å¡u kus kÃ³du, kterÃ½ spustÃ­m a vÃ½sledek se mi zobrazÃ­ pod buÅˆkou. Funguje to podobnÄ› jako REPL, ale se vÅ¡emi vÃ½hodami textovÃ©ho dokumentu. MÅ¯Å¾u zmÄ›nit libovolnÃ½ kus kÃ³du a ten opÄ›t spustit.

NavÃ­c v buÅˆkÃ¡ch nemusÃ­ bÃ½t jen spustitelnÃ½ kÃ³d -- mohou bÃ½t i textovÃ©, aÅ¥ uÅ¾ se jednÃ¡ o zformÃ¡tovanÃ½ text nebo tÅ™eba nadpisy. Notebook se uklÃ¡dÃ¡ i s vÃ½sledky vÃ½poÄtÅ¯, takÅ¾e ho mÅ¯Å¾u sdÃ­let dÃ¡l, pÅ™evÃ©st do jinÃ©ho formÃ¡tu nebo vytvoÅ™it [interaktivnÃ­ prezentaci](http://reference.wolfram.com/mathematica/howto/CreateASlideShow.html). SkvÄ›lÃ© na tom je, Å¾e mÃ¡m jedinÃ½ zdrojovÃ½ dokument s textem, kÃ³dem i jeho vÃ½sledky, kterÃ½ mÅ¯Å¾u sdÃ­let dÃ¡l beze ztrÃ¡ty informacÃ­ nebo interaktivity. A nepotÅ™ebuji dÄ›lat vÄ›deckÃ© vÃ½poÄty, jako je tÅ™eba vizualizace [Batmanovy kÅ™ivky](http://www.wolframalpha.com/input/?i=bat-insignia), abych vyuÅ¾il vÃ½hody, kterÃ© mi notebook nabÃ­zÃ­.

Maple i Mathematica jsou vÅ¡ak proprietÃ¡rnÃ­ aplikace -- a [docela](http://www.maplesoft.com/products/Maple/personal_edition/){: rel="nofollow"} [drahÃ©](http://www.wolfram.com/mathematica/how-to-buy/industry-individuals.html){: rel="nofollow"}. Proto vznikly svobodnÃ© alternativy; napÅ™Ã­klad [Sage](http://www.sagemath.org/), kterÃ½ poskytuje mj. rozhranÃ­ pro notebook v prohlÃ­Å¾eÄi [sagenb](http://nb.sagemath.org/).

Sage vÅ¡ak trpÃ­ dalÅ¡Ã­m neduhem: je primÃ¡rnÄ› navrÅ¾enÃ½ pro prÃ¡ci v Pythonu, spoleÄnÄ› s ekosystÃ©mem knihoven a rozÅ¡Ã­Å™enÃ­ specifickÃ½ch pro Sage. CelÃ½ systÃ©m je Ãºzce provÃ¡zanÃ½, takÅ¾e pouÅ¾Ã­vÃ¡me-li jinÃ© jazyky, moc nÃ¡m nepomÅ¯Å¾e.

## IPython -- univerzÃ¡lnÃ­ notebooky
{:#ipython}

Sage se zamÄ›Å™uje na vÃ½poÄty a vizualizace, pÅ™iÄemÅ¾ jako prostÅ™edek pouÅ¾Ã­vÃ¡ Python. ParalelnÄ› vÅ¡ak na bÃ¡zi Pythonu vznikl jinÃ½ projekt: [IPython](http://ipython.org/). PÅ¯vodnÃ­m cÃ­lem bylo vytvoÅ™it lepÅ¡Ã­ REPL, avÅ¡ak postupem Äasu vznikl jeden z nejpropracovanÄ›jÅ¡Ã­ch interaktivnÃ­ch shellÅ¯ vÅ¯bec, kterÃ½ umÃ­ [zobrazovat i vizualizace](http://ipython.org/ipython-doc/stable/interactive/qtconsole.html). Ale zatÃ­mco Sage od zÃ¡kladu nabÃ­zÃ­ vÅ¡e â€all inclusive,â€œ IPython je ÄistÃ½ Python s podporou pro grafickÃ© formy vÃ½stupu. PodobnÄ› jako Sage takÃ© nabÃ­zÃ­ rozhranÃ­ pro prÃ¡ci s notebookem v prohlÃ­Å¾eÄi -- [IPython Notebook](http://ipython.org/notebook.html).

Notebook v tomto pÅ™Ã­padÄ› pÅ™edstavuje jeden ze tÅ™Ã­ standardnÃ­ch <i>frontendÅ¯</i> -- vedle textovÃ©ho rozhranÃ­ a grafickÃ© Qt konzole. Frontend je striktnÄ› oddÄ›lenÃ½ od vÃ½poÄetnÃ­ho <i>jÃ¡dra</i>, kterÃ© od nÄ›j pÅ™ijÃ­mÃ¡ zprÃ¡vy a vracÃ­ vÃ½sledky.

<figure class="full">
![]({{page.assets}}/ipython1.png)
<figcaption>
  *Notebook* bÄ›Å¾Ã­ jako webserver a komunikuje s vÃ½poÄetnÃ­m *jÃ¡drem*; editor zÃ¡roveÅˆ bÄ›Å¾Ã­ jako klientskÃ¡ aplikace v prohlÃ­Å¾eÄi, kterÃ¡ se serverem komunikuje pÅ™es websockets.
</figcaption>
</figure>

OddÄ›lenÃ­ jÃ¡dra od frontendu mÅ¯Å¾e na prvnÃ­ pohled vypadat jako samolibÃ½ <i lang="en">overengineering</i>, ale je to zcela zÃ¡sadnÃ­ vÃ½hoda IPythonu. Komunikace s jÃ¡drem probÃ­hÃ¡ pomocÃ­ [ZeroMQ](http://zeromq.org/), takÅ¾e jÃ¡dro mÅ¯Å¾e klidnÄ› bÄ›Å¾et na jinÃ©m stroji neÅ¾ frontend. Jader mÅ¯Å¾e bÃ½t i vÃ­ce -- IPython mÃ¡ podporu pro [paralelnÃ­ vÃ½poÄty](http://ipython.org/ipython-doc/dev/parallel/parallel_intro.html). MÅ¯Å¾ete tak ovlÃ¡dat vÃ½poÄetnÃ­ cluster pÅ™Ã­mo z pohodlÃ­ notebooku.

<figure class="full">
![]({{page.assets}}/ipython2.png)
</figure>

Pro nÃ¡s je ovÅ¡em zÃ¡sadnÃ­ fakt, Å¾e vÃ½poÄetnÃ­ jÃ¡dro nemusÃ­ bÃ½t vÅ¯bec napsanÃ© v Pythonu. AlternativnÃ­ jÃ¡dra jsou vÃ­tanÃ¡ a tÄ›Å¡Ã­ se stÃ¡le lepÅ¡Ã­ podpoÅ™e. Existuje napÅ™Ã­klad [jÃ¡dro pro Haskell](https://github.com/gibiansky/IHaskell), [jÃ¡dro pro jazyk Julia](https://github.com/JuliaLang/IJulia.jl) je dokonce oficiÃ¡lnÃ­ souÄÃ¡stÃ­ [projektu Julia](http://julialang.org/#Designed.for.Parallelism.and.Cloud.Computing). A ano, existuje i jÃ¡dro pro Ruby, obligÃ¡tnÄ› nazvanÃ© [IRuby](https://github.com/minad/iruby).

<figure class="full">
![]({{page.assets}}/ipython3.png)
</figure>

## Co je v notebooku

IPython notebook je soubor s pÅ™Ã­ponou `.ipynb`. JednÃ¡ se o obyÄejnÃ½ [JSON](https://github.com/minad/iruby/blob/master/IRuby-Example.ipynb), ve kterÃ©m je jak obsah jednotlivÃ½ch bunÄ›k, tak vÃ½stup spuÅ¡tÄ›nÃ©ho kÃ³du. PÅ™Ã­kazem `ipython notebook` (pÅ™Ã­padnÄ› `iruby notebook`) se pak v aktuÃ¡lnÃ­m adresÃ¡Å™i spustÃ­ webovÃ½ server s editorem notebooku.

<figure class="full">
[![IRuby notebook]({{page.assets}}/iruby-nb1.png)]({{page.assets}}/iruby-nb1.png)
</figure>

BuÅˆky v dokumentu mohou bÃ½t rÅ¯znÃ½ch typÅ¯ -- kromÄ› samotnÃ©ho kÃ³du i bloky textu psanÃ© v Markdownu nebo nadpisy rÅ¯znÃ½ch ÃºrovnÃ­ (pro lepÅ¡Ã­ strukturovÃ¡nÃ­). Vedle toho mÅ¯Å¾e buÅˆka nÃ©st i rÅ¯znÃ¡ metadata â€“ to se hodÃ­ pÅ™edevÅ¡Ã­m pro tvorbu prezentacÃ­ ([popisuji nÃ­Å¾e](#slidemode)). Metadata buÅˆky lze editovat pÅ™es <i lang="en">Cell Toolbar</i>.

<figure id="cell-meta">
[![]({{page.assets}}/iruby-nb2.png)]({{page.assets}}/iruby-nb2.png)
</figure>

BuÅˆky s kÃ³dem mÅ¯Å¾u spustit dvojhmatem <kbd>Ctrl+Enter</kbd>. RozhodujÃ­cÃ­ pÅ™itom nenÃ­ poÅ™adÃ­ bunÄ›k v dokumentu, ale poÅ™adÃ­ jejich spuÅ¡tÄ›nÃ­ -- to indikujÃ­ ÄÃ­sla nalevo od buÅˆky. Definice si pamatuje aktuÃ¡lnÄ› bÄ›Å¾Ã­cÃ­ jÃ¡dro, takÅ¾e pokud server mezitÃ­m restartuji nebo notebook otevÅ™u na jinÃ©m poÄÃ­taÄi, je vÄ›tÅ¡inou dobrÃ© spustit vÅ¡echny buÅˆky v poÅ™adÃ­, v jakÃ©m jsou definovÃ¡ny. TÃ­m, Å¾e buÅˆky bÄ›Å¾Ã­ ve stejnÃ©m kontextu, z nich lze postupnÄ› sestavit aplikace, kterÃ© sahajÃ­ pÅ™es nÄ›kolik tÅ™Ã­d a metod.

<figure>
[![]({{page.assets}}/iruby-nb3.png)]({{page.assets}}/iruby-nb3.png)
<figcaption>
  ÄŒÃ­slo nalevo od buÅˆky oznaÄuje poÅ™adÃ­ spuÅ¡tÄ›nÃ­ tak, jak si je pamatuje jÃ¡dro.
</figcaption>
</figure>

SpeciÃ¡lnÃ­ funkce pro vizualizaci v noteboocÃ­ch jsou nejlÃ©pe podporovanÃ© v Pythonu (nepÅ™ekvapivÄ›). IRuby se vÅ¡ak v tomto smÄ›ru zaÄÃ­nÃ¡ zlepÅ¡ovat, takÅ¾e s vyuÅ¾itÃ­m dalÅ¡Ã­ch gemÅ¯ je moÅ¾nÃ© i v notebooku vytvÃ¡Å™et [elegantnÃ­ grafy](http://nbviewer.ipython.org/github/minad/iruby/blob/master/IRuby-Example.ipynb#Gruff).

## K Äemu se notebooky nehodÃ­

Notebooky jsou ideÃ¡lnÃ­ na ukÃ¡zku syntaxe a zÃ¡kladnÃ­ch konstrukcÃ­ jazyka, pÅ™Ã­padnÄ› na demonstraci jednoduchÃ½ch aplikacÃ­. V nÄ›kterÃ½ch pÅ™Ã­padech se formÃ¡t notebooku z principu nehodÃ­.

U zÃ¡kladnÃ­ch aplikacÃ­ se Äasto pracuje s pÅ™Ã­mÃ½m uÅ¾ivatelskÃ½m vstupem z klÃ¡vesnice (`gets` a podobnÄ›) -- ten vÅ¡ak v notebooku bohuÅ¾el neumÃ­me nasimulovat, takÅ¾e pÅ™Ã­klady by s tÃ­m nemÄ›ly pracovat.

ProblÃ©m mÅ¯Å¾e nastat takÃ© u rozsÃ¡hlejÅ¡Ã­ch aplikacÃ­, napÅ™Ã­klad nad frameworkem Rails -- notebook sice mÅ¯Å¾e naÄÃ­tat vnÄ›jÅ¡Ã­ zÃ¡vislosti, ale tÅ™eba webovÃ½ server pÅ™Ã­mo z notebooku nejspÃ­Å¡ nepobÄ›Å¾Ã­: jÃ¡dro se zablokuje na vstupu ze socketu a nebude pÅ™ijÃ­mat dalÅ¡Ã­ pÅ™Ã­kazy. Leda by se spustilo v separÃ¡tnÃ­m vlÃ¡knÄ›... Na druhou stranu, zprovoznit konzoli Rails v IPython notebooku, to uÅ¾ je zajÃ­mavÃ¡ vÃ½zva.

VelkÃ½ problÃ©m mohou bÃ½t i chyby v jÃ¡dru jazyka. IRuby funguje tak, Å¾e nahrazuje nÄ›kterÃ© standardnÃ­ tÅ™Ã­dy (vÄetnÄ› tÅ™Ã­dy Kernel) vlastnÃ­ implementacÃ­, kterÃ¡ posÃ­lÃ¡ vÃ½stupy zpÄ›t do notebooku. ObÄas se pak mÅ¯Å¾e stÃ¡t, Å¾e v jÃ¡dru zkrÃ¡tka nenÃ­ implementovanÃ¡ nÄ›jakÃ¡ metoda, kterou nÄ›jakÃ½ gem pouÅ¾Ã­vÃ¡. V takovÃ©m pÅ™Ã­padÄ› to chce klid a [hlÃ¡sit chyby](https://github.com/minad/iruby/issues).

## Notebooky v praxi
{:#exp}

BÄ›hem prvnÃ­ho semestru jsem pÅ™epsal ÄÃ¡st pÅ™ednÃ¡Å¡ek z LaTeXu do formy notebookÅ¯ a osvÄ›dÄilo se mi to v nÄ›kolika smÄ›rech.

PÅ™Ã­prava materiÃ¡lÅ¯ se stala mnohem pohodlnÄ›jÅ¡Ã­. MÃ¡m jistotu, Å¾e ukÃ¡zkovÃ½ kÃ³d bude fungovat a bude vracet sprÃ¡vnÃ½ vÃ½stup. NavÃ­c se v Markdownu pracuje mnohem lÃ©pe, neÅ¾ v LaTeXu.

PrÃ¡ce s vÃ½stupy je jednoduÅ¡Å¡Ã­. KdyÅ¾ mÃ¡m zdrojovÃ© materiÃ¡ly v LaTeXu, musÃ­m je upravit, vyexportovat do PDF (zpravidla ve vÃ­ce variantÃ¡ch), a ty nahrÃ¡t na nÃ¡Å¡ server pro podporu vÃ½uky. ZdrojovÃ½ notebook verzuju ve veÅ™ejnÃ©m repozitÃ¡Å™i a kdokoliv si jej mÅ¯Å¾e zobrazit pÅ™es [nbviewer](http://nbviewer.ipython.org/), i pokud nemÃ¡ nainstalovanÃ½ IPython. Jakmile dojde na prezentaci nebo jinÃ½ vÃ½stup, mÅ¯Å¾u jej zkonvertovat [jednÃ­m pÅ™Ã­kazem](http://ipython.org/ipython-doc/stable/notebook/nbconvert.html) do Å™ady dalÅ¡Ã­ch formÃ¡tÅ¯, vÄetnÄ› LaTeXu.

A v neposlednÃ­ Å™adÄ›, vÅ¡e se rychleji upravuje a lÃ©pe se mi pracuje se zpÄ›tnou vazbou. Pokud si bÄ›hem pÅ™ednÃ¡Å¡ky nÄ›kdo vÅ¡imne chyby, padne zajÃ­mavÃ½ dotaz nebo nastane nÄ›jakÃ¡ nejasnost, mÅ¯Å¾u chybu hned opravit, pÅ™Ã­padnÄ› doplnit dalÅ¡Ã­ kÃ³d, kterÃ½ problÃ©m lÃ©pe vysvÄ›tluje. Po pÅ™ednÃ¡Å¡ce pak zmÄ›ny jen uhladÃ­m a publikuju.

Po IRuby jsem sÃ¡hnul i na [Rails Girls]({% post_url 2014-05-31-railsgirls %}), kde jsme si v notebooku ukÃ¡zali dÄ›diÄnost tÅ™Ã­d.

<figure>
<blockquote class="twitter-tweet tw-align-center">
VÄera jsme programovali psa. Goofy je basenji. ğŸ˜‰ <a href="https://twitter.com/RailsGirlsPRG">@RailsGirlsPRG</a> <a href="http://t.co/jEcbKqbYhW">pic.twitter.com/jEcbKqbYhW</a>
<footer>
Hana Svabova (@HanaSvabova) <a href="https://twitter.com/HanaSvabova/statuses/467955179284070400">May 18, 2014</a>
</footer>
</blockquote>
</figure>

NicmÃ©nÄ› jÃ¡ s IPythonem v podstatÄ› teprve zaÄÃ­nÃ¡m. NapÅ™Ã­klad Eric Matthes [pouÅ¾Ã­vÃ¡ IPython pro Ãºvod do programovÃ¡nÃ­](http://peak5390.wordpress.com/2013/09/22/how-ipython-notebook-and-github-have-changed-the-way-i-teach-python/) a C. T. Brown s nÃ­m [uÄÃ­ evoluÄnÃ­ biologii](http://ivory.idyll.org/blog/teaching-with-ipynb-2.html).

***

# Jak na to
{: #howto}

## IPython a IRuby

* ZprovoznÄ›te IPython Notebook alespoÅˆ verze 1.2 (aktuÃ¡lnÃ­ je 2.1) -- viz [oficiÃ¡lnÃ­ dokumentace](http://ipython.org/install.html).
* Pro instalaci gemu je nutnÃ© mÃ­t sprÃ¡vnou verzi knihovny ZeroMQ (alespoÅˆ 3.2) pro gem [ffi-rzmq](http://zeromq.org/bindings:ruby-ffi):
  * pod Debianem a Ubuntu buÄ balÃ­Äek `libzmq3-dev` (pro kompilaci), nebo `ruby-ffi-rzmq` s `libzmq3`;
  * pod Windows (netestoval jsem) bude nutnÃ© nainstalovat [ZeroMQ](http://zeromq.org/distro:microsoft-windows).
* Gem nainstalovat pÅ™es `gem install iruby`.

Server se spouÅ¡tÃ­ pÅ™Ã­kazem `iruby notebook` v adresÃ¡Å™i s notebooky. ChovÃ¡ se stejnÄ› jako pÅ™Ã­kaz `ipython`, ale pracuje se zcela izolovanÃ½m [adresÃ¡Å™em pro profily](http://ipython.org/ipython-doc/dev/config/intro.html).

## Prezentace s notebookem
{:#slidemode}

Pro vytvÃ¡Å™enÃ­ prezentacÃ­ pouÅ¾Ã­vÃ¡m vÃ½Å¡e zmÃ­nÄ›nÃ¡ [metadata u bunÄ›k](#cell-meta). BuÅˆce nastavÃ­m pÅ™Ã­sluÅ¡nÃ© chovÃ¡nÃ­ (-/Slide/Subslide/Fragment/Skip/Notes), podle kterÃ©ho se vygeneruje vÃ½slednÃ¡ prezentace. TÃ­m pÃ¡dem mohu nÄ›kterÃ© buÅˆky z prezentace zcela vynechat a nÄ›kterÃ© pouÅ¾Ã­t jako poznÃ¡mky pÅ™ednÃ¡Å¡ejÃ­cÃ­ho -- nÃ¡zornÄ› je to ukÃ¡zanÃ© [v tomto ÄlÃ¡nku](http://www.damian.oquanta.info/posts/make-your-slides-with-ipython.html). ZkonvertovanÃ½ notebook pak bude pouÅ¾Ã­vat [Reveal.js](http://lab.hakim.se/reveal-js/). To mÃ¡ vÅ¡ak jeden zÃ¡sadnÃ­ hÃ¡Äek: vygenerovanÃ¡ prezentace obsahuje opÄ›t jenom statickÃ© ukÃ¡zky kÃ³du, tÃ­m pÃ¡dem celÃ¡ anabÃ¡ze za lepÅ¡Ã­m pÅ™ednÃ¡Å¡enÃ­m ztrÃ¡cÃ­ smysl.

Editor notebookÅ¯ je jenom JavaScript, HTML a CSS, takÅ¾e nenÃ­ problÃ©m jej rozÅ¡Ã­Å™it o dalÅ¡Ã­ funkce. K tomu existuje celÃ½ [repozitÃ¡Å™ notebook-extensions](https://github.com/ipython-contrib/IPython-notebook-extensions/wiki), konkrÃ©tnÄ› rozÅ¡Ã­Å™enÃ­ [slidemode](https://github.com/ipython-contrib/IPython-notebook-extensions/tree/master/slidemode), kterÃ© umoÅ¾Åˆuje editor notebooku pÅ™epnout do reÅ¾imu prezentace. Ta se potom chovÃ¡ podobnÄ› jako vyexportovanÃ¡ prezentace (pouÅ¾Ã­vÃ¡ stejnÃ¡ metadata), ale vÅ¡echny buÅˆky je moÅ¾nÃ© upravovat a spouÅ¡tÄ›t.

<figure class="full">
[![]({{page.assets}}/iruby-slidemode.png)]({{page.assets}}/iruby-slidemode.png)
<figcaption>
  Slidemode v prohlÃ­Å¾eÄi
</figcaption>
</figure>

SystÃ©m rozÅ¡Ã­Å™enÃ­ se vÅ¡ak v IPythonu 2 zmÄ›nil, takÅ¾e souÄasnÃ¡ rozÅ¡Ã­Å™enÃ­ fungujÃ­ zÅ™ejmÄ› jinak. V meziÄase nabÃ­zÃ­m [svou verzi slidemode](https://github.com/jnv/IPython-notebook-extensions) pro IPython 1.2.1, kompatibilnÃ­ s profilem IRuby.

TÅ™eba se Äasem doÄkÃ¡me [i oficiÃ¡lnÃ­ podpory](https://github.com/ipython/ipython/issues/1580).

***

# DalÅ¡Ã­ zdroje
{:#refs}

## JinÃ© nÃ¡stroje a postupy

* [Beaker Notebook](http://beakernotebook.com/) je alternativa IPython Notebooku od zÃ¡kladu navrÅ¾enÃ¡ pro podporu vÃ­ce jazykÅ¯. V souÄasnosti je ve fÃ¡zi betaverze a vyuÅ¾Ã­vÃ¡ ÄÃ¡st existujÃ­cÃ­ch jader pro IPython. Beaker existuje sotva pÅ¯l roku, takÅ¾e je pÅ™Ã­liÅ¡ brzo Äinit zÃ¡vÄ›ry; urÄitÄ› se vÅ¡ak vyplatÃ­ sledovat jeho vÃ½voj.
* [repl.it](http://repl.it/) Å™eÅ¡Ã­ REPL pÅ™Ã­mo v prohlÃ­Å¾eÄi -- interpret jazyka je zkompilovanÃ½ pomocÃ­ [Emscripten](http://emscripten.org/) do JavaScriptu.
* Pro jazyk R existuje [R Markdown](http://rmarkdown.rstudio.com/), standardnÃ­ Markdown dokumenty, kde se bloky kÃ³du automaticky spustÃ­. Z takovÃ½ch dokumentÅ¯ je moÅ¾nÃ© i [generovat prezentace](https://support.rstudio.com/hc/en-us/articles/200486468-Authoring-R-Presentations).
* [GitBook](https://www.gitbook.io/) slouÅ¾Ã­ primÃ¡rnÄ› pro psanÃ­ interaktivnÃ­ch knih, ale takÃ© umoÅ¾Åˆuje vloÅ¾it interaktivnÃ­ kusy kÃ³du -- v souÄasnosti je podporovanÃ½ JavaScript, ale podle autorÅ¯ je [plÃ¡novanÃ¡ podpora Ruby i Pythonu](https://github.com/GitbookIO/gitbook#exercises).
* JeÅ¡tÄ› pokroÄilejÅ¡Ã­m nÃ¡strojem pro interaktivnÃ­ knihy je [Runestone Interactive](http://runestoneinteractive.org/), pod kterÃ½ spadÃ¡ i web [Interactive Python](http://interactivepython.org/).
* ZajÃ­mavÃ© je vyuÅ¾itÃ­ notebookÅ¯ pro ukÃ¡zku API. [Projekt RAML](http://raml.org/) pro popis REST API nabÃ­zÃ­ [API Notebook](https://api-notebook.anypoint.mulesoft.com/). JednÃ¡ se spÃ­Å¡e o obecnÃ½ notebook pro JavaScript s knihovnou pro import RAML.

## JinÃ½ pÅ™Ã­stup k notebooku

* [Emacs IPython Notebook](http://tkf.github.io/emacs-ipython-notebook/) pÅ™idÃ¡vÃ¡ prÃ¡ci s IPython Notebookem pÅ™Ã­mo do editoru.
* ObdobnÃ½ plugin [existuje i pro Sublime Text](https://github.com/maximsch2/SublimeIPythonNotebook).
* Naopak pro editor v prohlÃ­Å¾eÄi je moÅ¾nÃ© pouÅ¾Ã­t rozÅ¡Ã­Å™enÃ­ [IPython Vimception](https://github.com/ivanov/ipython-vimception), kterÃ© simuluje chovÃ¡nÃ­ Vimu.

## O IPythonu

* Honza Cibulka popsal [jak na analÃ½zu dat v IPython notebooku](http://www.root.cz/clanky/rychla-analyza-dat-v-ipython-notebooku/).
* Fernando Perez, autor IPythonu, sepsal zajÃ­mavou [historickou perspektivu o IPython Notebook](http://blog.fperez.org/2012/01/ipython-notebook-historical.html) -- jakÃ½ je vztah k projektu Sage a co vÅ¡echno umoÅ¾nila zvolenÃ¡ architektura IPythonu.
* Andrew Gibiansky popsal velice podrobnÄ› [co zahrnuje vytvoÅ™enÃ­ jÃ¡dra pro IPython](http://andrew.gibiansky.com/blog/ipython/ipython-kernels/).
* Eric Matthes popsal, jak [IPython a GitHub zmÄ›nily jeho zpÅ¯sob vÃ½uky programovÃ¡nÃ­](http://peak5390.wordpress.com/2013/09/22/how-ipython-notebook-and-github-have-changed-the-way-i-teach-python/) (k lepÅ¡Ã­mu).
* C. Titus Brown popisuje svou [zkuÅ¡enost s IPythonem pro vÃ½uku evoluÄnÃ­ biologie](http://ivory.idyll.org/blog/teaching-with-ipynb-2.html) a shrnuje vÃ½hody a rizika tohoto pÅ™Ã­stupu.
